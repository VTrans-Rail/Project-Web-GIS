# -*- coding: utf-8 -*-
# ---------------------------------------------------------------------------
# 7_AddProject Join Calculate DynSeg.py
# Created on: 2014-11-19 09:46:39.00000
#   (generated by ArcGIS/ModelBuilder)
# Description: 
# ---------------------------------------------------------------------------

# Import arcpy module
import arcpy


# Local variables:
GDB_Rail = "Database Connections\\GDB_Rail.sde"
Projects__Table_ = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Projects"
Rail_LRS = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.INV_Rail_LRS"
GDB_Rail_RAIL_ADMIN_PROJ_AddProject_WebFC__2_ = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_AddProject_WebFC"
RAIL_ADMIN_PROJ_Projects_Vie3 = "RAIL_ADMIN.PROJ_Projects_Vie3"
Project_Points = "RAIL_ADMIN.PROJ_Projects_Vie1"
Project_Lines = "RAIL_ADMIN.PROJ_Projects_Vie2"
Point_Events = "Point Events"
Line_Events = "Line Events"
RAIL_ADMIN_PROJ_Projects_Vie3__3_ = "RAIL_ADMIN.PROJ_Projects_Vie3"
RAIL_ADMIN_PROJ_Projects_Vie__6_ = "RAIL_ADMIN.PROJ_Projects_Vie3"
RAIL_ADMIN_PROJ_Projects_Vie__7_ = "RAIL_ADMIN.PROJ_Projects_Vie3"
RAIL_ADMIN_PROJ_Projects_Vie__8_ = "RAIL_ADMIN.PROJ_Projects_Vie3"
RAIL_ADMIN_PROJ_Projects_Vie__9_ = "RAIL_ADMIN.PROJ_Projects_Vie3"
RAIL_ADMIN_PROJ_Projects_Vie__10_ = "RAIL_ADMIN.PROJ_Projects_Vie3"
GDB_Rail_RAIL_ADMIN_PROJ_Lines = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Lines"
created_user = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Lines"
created_date = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Lines"
last_edited_user = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Lines"
GDB_Rail_RAIL_ADMIN_PROJ_Points = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Points"
created_user__2_ = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Points"
created_date__2_ = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Points"
last_edited_user__2_ = "Database Connections\\GDB_Rail.sde\\GDB_Rail.RAIL_ADMIN.PROJ_Points"
Joined = "RAIL_ADMIN.PROJ_Projects_Vie3"

# Process: Make Table View
arcpy.MakeTableView_management(Projects__Table_, RAIL_ADMIN_PROJ_Projects_Vie3, "", "", "OBJECTID OBJECTID VISIBLE NONE;ProjectName ProjectName VISIBLE NONE;ProjectType ProjectType VISIBLE NONE;PIN PIN VISIBLE NONE;VTransPM VTransPM VISIBLE NONE;ConsultantPM ConsultantPM VISIBLE NONE;Consultant Consultant VISIBLE NONE;ConsultantPMContact ConsultantPMContact VISIBLE NONE;RailLine RailLine VISIBLE NONE;VRLID VRLID VISIBLE NONE;LineName LineName VISIBLE NONE;Operator Operator VISIBLE NONE;Division Division VISIBLE NONE;Subdivision Subdivision VISIBLE NONE;Branch Branch VISIBLE NONE;StateOwned StateOwned VISIBLE NONE;RailTrail RailTrail VISIBLE NONE;FromMP FromMP VISIBLE NONE;ToMP ToMP VISIBLE NONE;AssetType AssetType VISIBLE NONE;AssetID AssetID VISIBLE NONE;LocationType LocationType VISIBLE NONE;AssetNumber AssetNumber VISIBLE NONE;BasicDescription BasicDescription VISIBLE NONE;ProjectDescription ProjectDescription VISIBLE NONE;LatestConstEst LatestConstEst VISIBLE NONE;EnvAllClear EnvAllClear VISIBLE NONE;UtilClear UtilClear VISIBLE NONE;ROWClear ROWClear VISIBLE NONE;RRClear RRClear VISIBLE NONE;AdvertiseTarget AdvertiseTarget VISIBLE NONE;Include Include VISIBLE NONE;created_user created_user VISIBLE NONE;created_date created_date VISIBLE NONE;last_edited_user last_edited_user VISIBLE NONE;last_edited_date last_edited_date VISIBLE NONE")

# Process: Join project table to Rail LRS
arcpy.AddJoin_management(RAIL_ADMIN_PROJ_Projects_Vie3, "VRLID", Rail_LRS, "VRLID", "KEEP_ALL")

# Process: Calculate LineName
arcpy.CalculateField_management(Joined, "GDB_Rail.RAIL_ADMIN.PROJ_Projects.LineName", "[GDB_Rail.RAIL_ADMIN.INV_Rail_LRS.LineName]", "VB", "")

# Process: Calculate Operator
arcpy.CalculateField_management(RAIL_ADMIN_PROJ_Projects_Vie3__3_, "GDB_Rail.RAIL_ADMIN.PROJ_Projects.Operator", "[GDB_Rail.RAIL_ADMIN.INV_Rail_LRS.Operator]", "VB", "")

# Process: Calculate Division
arcpy.CalculateField_management(RAIL_ADMIN_PROJ_Projects_Vie__6_, "GDB_Rail.RAIL_ADMIN.PROJ_Projects.Division", "[GDB_Rail.RAIL_ADMIN.INV_Rail_LRS.Division]", "VB", "")

# Process: Calculate Subdivision
arcpy.CalculateField_management(RAIL_ADMIN_PROJ_Projects_Vie__7_, "GDB_Rail.RAIL_ADMIN.PROJ_Projects.Subdivision", "[GDB_Rail.RAIL_ADMIN.INV_Rail_LRS.Subdivision]", "VB", "")

# Process: Calculate Branch
arcpy.CalculateField_management(RAIL_ADMIN_PROJ_Projects_Vie__8_, "GDB_Rail.RAIL_ADMIN.PROJ_Projects.Branch", "[GDB_Rail.RAIL_ADMIN.INV_Rail_LRS.Branch]", "VB", "")

# Process: Calculate StateOwned
arcpy.CalculateField_management(RAIL_ADMIN_PROJ_Projects_Vie__9_, "GDB_Rail.RAIL_ADMIN.PROJ_Projects.StateOwned", "[GDB_Rail.RAIL_ADMIN.INV_Rail_LRS.StateOwned]", "VB", "")

# Process: Calculate RailTrail
arcpy.CalculateField_management(RAIL_ADMIN_PROJ_Projects_Vie__10_, "GDB_Rail.RAIL_ADMIN.PROJ_Projects.RailTrail", "[GDB_Rail.RAIL_ADMIN.INV_Rail_LRS.RailTrail]", "VB", "")

# Process: Query projects table - points
arcpy.MakeTableView_management(Projects__Table_, Project_Points, "ToMP IS NULL", "", "OBJECTID OBJECTID VISIBLE NONE;ProjectName ProjectName VISIBLE NONE;ProjectType ProjectType VISIBLE NONE;PIN PIN VISIBLE NONE;VTransPM VTransPM VISIBLE NONE;ConsultantPM ConsultantPM VISIBLE NONE;Consultant Consultant VISIBLE NONE;ConsultantPMContact ConsultantPMContact VISIBLE NONE;RailLine RailLine VISIBLE NONE;VRLID VRLID VISIBLE NONE;LineName LineName VISIBLE NONE;Operator Operator VISIBLE NONE;Division Division VISIBLE NONE;Subdivision Subdivision VISIBLE NONE;Branch Branch VISIBLE NONE;StateOwned StateOwned VISIBLE NONE;RailTrail RailTrail VISIBLE NONE;FromMP FromMP VISIBLE NONE;ToMP ToMP VISIBLE NONE;AssetType AssetType VISIBLE NONE;AssetID AssetID VISIBLE NONE;LocationType LocationType VISIBLE NONE;AssetNumber AssetNumber VISIBLE NONE;BasicDescription BasicDescription VISIBLE NONE;ProjectDescription ProjectDescription VISIBLE NONE;LatestConstEst LatestConstEst VISIBLE NONE;EnvAllClear EnvAllClear VISIBLE NONE;UtilClear UtilClear VISIBLE NONE;ROWClear ROWClear VISIBLE NONE;RRClear RRClear VISIBLE NONE;AdvertiseTarget AdvertiseTarget VISIBLE NONE;Include Include VISIBLE NONE;created_user created_user VISIBLE NONE;created_date created_date VISIBLE NONE;last_edited_user last_edited_user VISIBLE NONE;last_edited_date last_edited_date VISIBLE NONE")

# Process: Dynseg points
arcpy.MakeRouteEventLayer_lr(Rail_LRS, "VRLID", Project_Points, "VRLID POINT FromMP", Point_Events, "", "NO_ERROR_FIELD", "NO_ANGLE_FIELD", "NORMAL", "ANGLE", "LEFT", "POINT")

# Process: Project points to FC
arcpy.FeatureClassToFeatureClass_conversion(Point_Events, GDB_Rail, "PROJ_Points", "", "ProjectName \"Project Name\" true true false 100 Text 0 0 ,First,#,Point Events,ProjectName,-1,-1;ProjectType \"ProjectType\" true true false 255 Text 0 0 ,First,#,Point Events,ProjectType,-1,-1;PIN \"PIN Number\" true true false 7 Text 0 0 ,First,#,Point Events,PIN,-1,-1;VTransPM \"VTrans Project Manager\" true true false 255 Text 0 0 ,First,#,Point Events,VTransPM,-1,-1;ConsultantPM \"Consultant Project Manager\" true true false 255 Text 0 0 ,First,#,Point Events,ConsultantPM,-1,-1;Consultant \"Consultant\" true true false 255 Text 0 0 ,First,#,Point Events,Consultant,-1,-1;ConsultantPMContact \"Consultant PM Contact Info\" true true false 250 Text 0 0 ,First,#,Point Events,ConsultantPMContact,-1,-1;RailLine \"Rail Line\" true true false 255 Text 0 0 ,First,#,Point Events,RailLine,-1,-1;VRLID \"VRLID\" true true false 255 Text 0 0 ,First,#,Point Events,VRLID,-1,-1;LineName \"Line Name\" true true false 255 Text 0 0 ,First,#,Point Events,LineName,-1,-1;Operator \"Operator\" true true false 255 Text 0 0 ,First,#,Point Events,Operator,-1,-1;Division \"Division\" true true false 255 Text 0 0 ,First,#,Point Events,Division,-1,-1;Subdivision \"Subdivision\" true true false 255 Text 0 0 ,First,#,Point Events,Subdivision,-1,-1;Branch \"Branch\" true true false 255 Text 0 0 ,First,#,Point Events,Branch,-1,-1;StateOwned \"State Owned\" true true false 255 Text 0 0 ,First,#,Point Events,StateOwned,-1,-1;RailTrail \"Rail Trail\" true true false 255 Text 0 0 ,First,#,Point Events,RailTrail,-1,-1;FromMP \"FromMP\" true true false 8 Double 8 38 ,First,#,Point Events,FromMP,-1,-1;ToMP \"ToMP\" true true false 8 Double 8 38 ,First,#,Point Events,ToMP,-1,-1;AssetType \"Asset Type\" true true false 255 Text 0 0 ,First,#,Point Events,AssetType,-1,-1;AssetID \"AssetID\" true true false 255 Text 0 0 ,First,#,Point Events,AssetID,-1,-1;LocationType \"Location Type\" true true false 255 Text 0 0 ,First,#,Point Events,LocationType,-1,-1;AssetNumber \"Asset Number\" true true false 255 Text 0 0 ,First,#,Point Events,AssetNumber,-1,-1;BasicDescription \"Basic Project Description\" true true false 250 Text 0 0 ,First,#,Point Events,BasicDescription,-1,-1;ProjectDescription \"Full Project Description\" true true false 500 Text 0 0 ,First,#,Point Events,ProjectDescription,-1,-1;LatestConstEst \"Latest Construction Estimate w/ E&C\" true true false 8 Double 8 38 ,First,#,Point Events,LatestConstEst,-1,-1;EnvAllClear \"Environmental All Clear\" true true false 255 Text 0 0 ,First,#,Point Events,EnvAllClear,-1,-1;UtilClear \"Utilities Clearance\" true true false 255 Text 0 0 ,First,#,Point Events,UtilClear,-1,-1;ROWClear \"ROW Clearance\" true true false 255 Text 0 0 ,First,#,Point Events,ROWClear,-1,-1;RRClear \"Railroad Clearance\" true true false 255 Text 0 0 ,First,#,Point Events,RRClear,-1,-1;AdvertiseTarget \"Project Advertisement Target\" true true false 255 Text 0 0 ,First,#,Point Events,AdvertiseTarget,-1,-1;Include \"Include In Reports\" true true false 255 Text 0 0 ,First,#,Point Events,Include,-1,-1;created_user \"created_user\" false true false 255 Text 0 0 ,First,#,Point Events,created_user,-1,-1;created_date \"created_date\" false true false 36 Date 0 0 ,First,#,Point Events,created_date,-1,-1;last_edited_user \"last_edited_user\" false true false 255 Text 0 0 ,First,#,Point Events,last_edited_user,-1,-1;last_edited_date \"last_edited_date\" false true false 36 Date 0 0 ,First,#,Point Events,last_edited_date,-1,-1", "")

# Process: Add Field (5)
arcpy.AddField_management(GDB_Rail_RAIL_ADMIN_PROJ_Points, "created_user", "TEXT", "", "", "255", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Add Field (6)
arcpy.AddField_management(created_user__2_, "created_date", "DATE", "", "", "", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Add Field (7)
arcpy.AddField_management(created_date__2_, "last_edited_user", "TEXT", "", "", "255", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Add Field (8)
arcpy.AddField_management(last_edited_user__2_, "last_edited_date", "DATE", "", "", "", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Query projects table - lines
arcpy.MakeTableView_management(Projects__Table_, Project_Lines, "GDB_Rail.RAIL_ADMIN.PROJ_Projects.ToMP is not null", "", "OBJECTID OBJECTID VISIBLE NONE;ProjectName ProjectName VISIBLE NONE;ProjectType ProjectType VISIBLE NONE;PIN PIN VISIBLE NONE;VTransPM VTransPM VISIBLE NONE;ConsultantPM ConsultantPM VISIBLE NONE;Consultant Consultant VISIBLE NONE;ConsultantPMContact ConsultantPMContact VISIBLE NONE;RailLine RailLine VISIBLE NONE;VRLID VRLID VISIBLE NONE;LineName LineName VISIBLE NONE;Operator Operator VISIBLE NONE;Division Division VISIBLE NONE;Subdivision Subdivision VISIBLE NONE;Branch Branch VISIBLE NONE;StateOwned StateOwned VISIBLE NONE;RailTrail RailTrail VISIBLE NONE;FromMP FromMP VISIBLE NONE;ToMP ToMP VISIBLE NONE;AssetType AssetType VISIBLE NONE;AssetID AssetID VISIBLE NONE;LocationType LocationType VISIBLE NONE;AssetNumber AssetNumber VISIBLE NONE;BasicDescription BasicDescription VISIBLE NONE;ProjectDescription ProjectDescription VISIBLE NONE;LatestConstEst LatestConstEst VISIBLE NONE;EnvAllClear EnvAllClear VISIBLE NONE;UtilClear UtilClear VISIBLE NONE;ROWClear ROWClear VISIBLE NONE;RRClear RRClear VISIBLE NONE;AdvertiseTarget AdvertiseTarget VISIBLE NONE;Include Include VISIBLE NONE;created_user created_user VISIBLE NONE;created_date created_date VISIBLE NONE;last_edited_user last_edited_user VISIBLE NONE;last_edited_date last_edited_date VISIBLE NONE")

# Process: Dynseg lines
arcpy.MakeRouteEventLayer_lr(Rail_LRS, "VRLID", Project_Lines, "VRLID LINE FromMP ToMP", Line_Events, "", "NO_ERROR_FIELD", "NO_ANGLE_FIELD", "NORMAL", "ANGLE", "LEFT", "POINT")

# Process: Project lines to FC
arcpy.FeatureClassToFeatureClass_conversion(Line_Events, GDB_Rail, "PROJ_Lines", "", "ProjectName \"Project Name\" true true false 100 Text 0 0 ,First,#,Line Events,ProjectName,-1,-1;ProjectType \"ProjectType\" true true false 255 Text 0 0 ,First,#,Line Events,ProjectType,-1,-1;PIN \"PIN Number\" true true false 7 Text 0 0 ,First,#,Line Events,PIN,-1,-1;VTransPM \"VTrans Project Manager\" true true false 255 Text 0 0 ,First,#,Line Events,VTransPM,-1,-1;ConsultantPM \"Consultant Project Manager\" true true false 255 Text 0 0 ,First,#,Line Events,ConsultantPM,-1,-1;Consultant \"Consultant\" true true false 255 Text 0 0 ,First,#,Line Events,Consultant,-1,-1;ConsultantPMContact \"Consultant PM Contact Info\" true true false 250 Text 0 0 ,First,#,Line Events,ConsultantPMContact,-1,-1;RailLine \"Rail Line\" true true false 255 Text 0 0 ,First,#,Line Events,RailLine,-1,-1;VRLID \"VRLID\" true true false 255 Text 0 0 ,First,#,Line Events,VRLID,-1,-1;LineName \"Line Name\" true true false 255 Text 0 0 ,First,#,Line Events,LineName,-1,-1;Operator \"Operator\" true true false 255 Text 0 0 ,First,#,Line Events,Operator,-1,-1;Division \"Division\" true true false 255 Text 0 0 ,First,#,Line Events,Division,-1,-1;Subdivision \"Subdivision\" true true false 255 Text 0 0 ,First,#,Line Events,Subdivision,-1,-1;Branch \"Branch\" true true false 255 Text 0 0 ,First,#,Line Events,Branch,-1,-1;StateOwned \"State Owned\" true true false 255 Text 0 0 ,First,#,Line Events,StateOwned,-1,-1;RailTrail \"Rail Trail\" true true false 255 Text 0 0 ,First,#,Line Events,RailTrail,-1,-1;FromMP \"FromMP\" true true false 8 Double 8 38 ,First,#,Line Events,FromMP,-1,-1;ToMP \"ToMP\" true true false 8 Double 8 38 ,First,#,Line Events,ToMP,-1,-1;AssetType \"Asset Type\" true true false 255 Text 0 0 ,First,#,Line Events,AssetType,-1,-1;AssetID \"AssetID\" true true false 255 Text 0 0 ,First,#,Line Events,AssetID,-1,-1;LocationType \"Location Type\" true true false 255 Text 0 0 ,First,#,Line Events,LocationType,-1,-1;AssetNumber \"Asset Number\" true true false 255 Text 0 0 ,First,#,Line Events,AssetNumber,-1,-1;BasicDescription \"Basic Project Description\" true true false 250 Text 0 0 ,First,#,Line Events,BasicDescription,-1,-1;ProjectDescription \"Full Project Description\" true true false 500 Text 0 0 ,First,#,Line Events,ProjectDescription,-1,-1;LatestConstEst \"Latest Construction Estimate w/ E&C\" true true false 8 Double 8 38 ,First,#,Line Events,LatestConstEst,-1,-1;EnvAllClear \"Environmental All Clear\" true true false 255 Text 0 0 ,First,#,Line Events,EnvAllClear,-1,-1;UtilClear \"Utilities Clearance\" true true false 255 Text 0 0 ,First,#,Line Events,UtilClear,-1,-1;ROWClear \"ROW Clearance\" true true false 255 Text 0 0 ,First,#,Line Events,ROWClear,-1,-1;RRClear \"Railroad Clearance\" true true false 255 Text 0 0 ,First,#,Line Events,RRClear,-1,-1;AdvertiseTarget \"Project Advertisement Target\" true true false 255 Text 0 0 ,First,#,Line Events,AdvertiseTarget,-1,-1;Include \"Include In Reports\" true true false 255 Text 0 0 ,First,#,Line Events,Include,-1,-1;created_user \"created_user\" false true false 255 Text 0 0 ,First,#,Line Events,created_user,-1,-1;created_date \"created_date\" false true false 36 Date 0 0 ,First,#,Line Events,created_date,-1,-1;last_edited_user \"last_edited_user\" false true false 255 Text 0 0 ,First,#,Line Events,last_edited_user,-1,-1;last_edited_date \"last_edited_date\" false true false 36 Date 0 0 ,First,#,Line Events,last_edited_date,-1,-1", "")

# Process: Add Field
arcpy.AddField_management(GDB_Rail_RAIL_ADMIN_PROJ_Lines, "created_user", "TEXT", "", "", "255", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Add Field (2)
arcpy.AddField_management(created_user, "created_date", "DATE", "", "", "", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Add Field (3)
arcpy.AddField_management(created_date, "last_edited_user", "TEXT", "", "", "255", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Add Field (4)
arcpy.AddField_management(last_edited_user, "last_edited_date", "DATE", "", "", "", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Update projects domain from add project FC
arcpy.TableToDomain_management(GDB_Rail_RAIL_ADMIN_PROJ_AddProject_WebFC__2_, "ProjectName", "ProjectName", GDB_Rail, "ProjectName", "ProjectName", "APPEND")

# Process: Delete Rows
arcpy.DeleteRows_management(GDB_Rail_RAIL_ADMIN_PROJ_AddProject_WebFC__2_)

